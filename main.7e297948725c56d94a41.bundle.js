(()=>{"use strict";var e,t={854:(e,t,s)=>{var i=s(440),a=s.n(i);class o extends Phaser.GameObjects.Sprite{constructor(e,t,s){super(e,t,s,"coin1"),e.add.existing(this),e.physics.add.existing(this),e.physics.world.enable(this),this.init(),this.play("spin")}init(){let e=this.body;e.setAllowGravity(!1),e.setImmovable(!0),this.anims.create({key:"spin",frames:[{key:"coin1"},{key:"coin2"},{key:"coin3"},{key:"coin4"}],frameRate:8,repeat:-1})}update(){}}const n=o;class r extends Phaser.GameObjects.Zone{constructor(e,t,s,i,a,o){super(e,t,s,i,a),e.add.existing(this),e.physics.add.existing(this),e.physics.world.enable(this),this.jumpForce=o,this.init()}init(){this.setOrigin(0,0);let e=this.body;e.setAllowGravity(!1),e.setImmovable(!0),e.setSize(this.width,this.height),e.setOffset(0,0),this.scene.add.image(this.x,this.y,"bump").setDisplaySize(this.width,this.height).setDisplayOrigin(0,0),this.scene.add.particles(this.x+this.width/2,this.y,"particle",{color:[16766720,16776988],colorEase:"quart.out",lifespan:100,angle:{min:-100,max:-80},scale:{start:2,end:0,ease:"sine.in"},speed:{min:250,max:350},advance:50,frequency:150,blendMode:"ADD"})}update(){}}const l=r,h=class extends l{constructor(e,t,s,i,a){super(e,t,s,i,a,0)}init(){this.setOrigin(0,0);let e=this.body;e.setAllowGravity(!1),e.setImmovable(!0),e.setSize(this.width,this.height),e.setOffset(0,0),this.scene.add.image(this.x,this.y,"gravBump").setDisplaySize(this.width,this.height).setDisplayOrigin(0,0),this.scene.add.particles(this.x+this.width/2,this.y,"particle",{color:[255,255],colorEase:"quart.out",lifespan:100,angle:{min:-100,max:-80},scale:{start:2,end:0,ease:"sine.in"},speed:{min:250,max:350},advance:50,frequency:150,blendMode:"ADD"})}};class d extends Phaser.GameObjects.Zone{constructor(e,t,s,i,a,o){super(e,t,s,i,a),e.add.existing(this),e.physics.add.existing(this),e.physics.world.enable(this),this.jumpForce=o,this.init()}init(){this.setOrigin(0,0);let e=this.body;e.setAllowGravity(!1),e.setImmovable(!0),e.setSize(this.width,this.height),e.setOffset(0,0),this.scene.add.image(this.x,this.y,"ring").setDisplaySize(this.width,this.height).setDisplayOrigin(0,0),this.scene.add.particles(this.x+this.width/2,this.y+this.height/2,"particle",{color:[16766720,16776988],colorEase:"quart.out",lifespan:100,scale:{start:0,end:2,ease:"sine.in"},speed:{min:250,max:350},advance:50,frequency:10,blendMode:"ADD"})}update(){}}const c=d;class p extends Phaser.GameObjects.Zone{constructor(e,t,s,i,a){super(e,t,s,i,a),e.add.existing(this),e.physics.add.existing(this),e.physics.world.enable(this),this.init()}init(){this.setOrigin(0,0);let e=this.body;e.setAllowGravity(!1),e.setImmovable(!0),e.setSize(this.width,this.height),e.setOffset(0,0)}update(){}}const u=p;class g extends Phaser.GameObjects.Zone{constructor(e,t,s,i,a,o){super(e,t,s,i,a),e.add.existing(this),e.physics.add.existing(this),e.physics.world.enable(this),this.nextState=o,this.init()}init(){this.setOrigin(0,0);let e=this.body;e.setAllowGravity(!1),e.setImmovable(!0),e.setSize(this.width,this.height),e.setOffset(0,0)}update(){}}const m=g;class y extends Phaser.GameObjects.Zone{constructor(e,t,s,i,a){super(e,t,s,i,a),e.add.existing(this),e.physics.add.existing(this),e.physics.world.enable(this),this.init()}init(){this.setOrigin(0,0);let e=this.body;e.setAllowGravity(!1),e.setImmovable(!0),e.setSize(this.width,this.height),e.setOffset(0,0)}update(){}}const v=y,b=class{constructor(e){this.observers=[],this.scene=e,this.pointer=e.input.activePointer,this.jumpKey=e.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.SPACE),this.setupInputs()}attach(e){if(this.observers.includes(e))return console.log("Observer has already been attached.");this.observers.push(e)}detach(e){const t=this.observers.indexOf(e);if(-1===t)return console.log("Nonexistent observer.");this.observers.splice(t,1)}notify(){for(const e of this.observers)e.onNotify(this)}setupInputs(){this.scene.input.on("pointerdown",(e=>{this.pointer=e,this.notify()})),this.scene.input.on("pointerup",(e=>{this.notify()})),this.jumpKey.on("down",(e=>{this.notify()})),this.jumpKey.on("up",(e=>{this.notify()}))}};class _{static getInstance(){return _.instance||(_.instance=new _),_.instance}getLevelProgress(e){return localStorage.getItem(e)||localStorage.setItem(e,"0"),parseFloat(localStorage.getItem(e))}setLevelProgress(e,t){localStorage.getItem(e)?parseFloat(localStorage.getItem(e))<t&&localStorage.setItem(e,t.toString()):localStorage.setItem(e,t.toString())}}const w=_;class B extends Phaser.GameObjects.Sprite{constructor(e,t,s,i){if(super(e,t,s,i),this._jumping=!1,e.add.existing(this),this.setTint(65280),e.physics.add.existing(this),e.physics.world.enable(this),this.speedX=392,null==e.input.keyboard)throw new Error("scene.input.keyboard is null");console.log(e.input.keyboard),e instanceof M&&e.inputHandler.attach(this),this.body.setSize(57,57)}onNotify(e){e instanceof b&&(e.jumpKey.isDown||e.pointer.isDown?this._jumping=!0:this._jumping=!1)}update(){this.body.setVelocityX(this.speedX),this.jump()}jump(){let e=this.body;this._jumping&&e.blocked.down?(e.setVelocityY(-910),e.setAngularVelocity(300),e.setAllowRotation(!0)):e.blocked.down?e.blocked.down&&(e.setAngularVelocity(0),e.setAllowRotation(!1),this.flatOut()):(e.setAngularVelocity(300),e.setAllowRotation(!0))}flatOut(){this.angle<45&&this.angle>-45?this.angle=0:this.angle>=45&&this.angle<135?this.angle=90:this.angle<=-45&&this.angle>-135?this.angle=-90:(this.angle>=135||this.angle<=-135)&&(this.angle=180)}setActive(e){return super.setActive(e),e&&this.scene instanceof M?this.scene.inputHandler.attach(this):!e&&this.scene instanceof M&&(this.scene.inputHandler.detach(this),this._jumping=!1),this}}const f=B;class S extends Phaser.GameObjects.Container{constructor(e,t,s){if(super(e,t,s),this._flying=!1,this.add([e.add.sprite(32,18,"cube").setScale(.75,.75),e.add.sprite(32,40,"ship")]),this.getAll().forEach((e=>{e instanceof Phaser.GameObjects.Sprite&&e.setTint(16777215*Math.random())})),e.add.existing(this),e.physics.add.existing(this),e.physics.world.enable(this),this.speedX=408,null==e.input.keyboard)throw new Error("scene.input.keyboard is null");e instanceof M&&e.inputHandler.attach(this);let i=this.body;i.setSize(57,57),i.setMaxVelocityY(1e3),i.allowGravity=!1}onNotify(e){e instanceof b&&(e.jumpKey.isDown||e.pointer.isDown?this._flying=!0:this._flying=!1)}update(){this.body.setVelocityX(this.speedX),this.fly()}fly(){let e=this.body;this._flying?(e.setVelocityY(-300),e.setAllowRotation(!0)):e.blocked.down&&e.setAllowRotation(!1),this.flatOut()}flatOut(){if(null==this.body)throw new Error("this.body is null");if(this.body.blocked.up)return void(this.angle=0);let e=Math.atan2(this.body.velocity.y/6,this.body.velocity.x),t=Phaser.Math.RadToDeg(e);this.angle=t}setActive(e){return super.setActive(e),this.getAll().forEach((t=>{t instanceof Phaser.GameObjects.Sprite&&t.setActive(e)})),e&&this.scene instanceof M?this.scene.inputHandler.attach(this):!e&&this.scene instanceof M&&(this.scene.inputHandler.detach(this),this._flying=!1),this}}const P=S,x=class{constructor(e){this.onEnter=()=>{console.log("PlayerCubeState onEnter"),this.object.setPosition(A.instance.playerPosition.x,A.instance.playerPosition.y),this.object.setActive(!0),this.object.setVisible(!0);let e=this.object.body;e.setVelocityY(0),e.allowGravity=!0},this.onExit=()=>{console.log(this.object.x,this.object.y),console.log("PlayerCubeState onExit"),this.object.setActive(!1),this.object.setVisible(!1);let e=this.object.body;e.setVelocityX(0),e.allowGravity=!1},this.playerRule={collideBottom:!0,collideLeft:!0,collideRight:!1,collideTop:!1},this.object=e}update(){this.object.update(),A.instance.playerPosition.x=this.object.x,A.instance.playerPosition.y=this.object.y}},C=class{constructor(e){this.onEnter=()=>{this.object.scene.cameras.main.zoomTo(.75,1e3);let e=this.object.body;console.log("PlayerShipState onEnter"),this.object.setActive(!0),this.object.setVisible(!0),this.object.setPosition(A.instance.playerPosition.x,A.instance.playerPosition.y),e.setVelocityY(0),e.allowGravity=!0},this.onExit=()=>{this.object.scene.cameras.main.zoomTo(1,1e3),console.log("PlayerShipState onExit"),this.object.setActive(!1),this.object.setVisible(!1);let e=this.object.body;e.setVelocityX(0),e.allowGravity=!1},this.playerRule={collideBottom:!0,collideLeft:!1,collideRight:!1,collideTop:!0},this.object=e}update(){this.object.update(),A.instance.playerPosition.x=this.object.x,A.instance.playerPosition.y=this.object.y}},I=class{get currentState(){if(!this._currentState)throw new Error("No state set");return this._currentState}constructor(){this.stateMap=new Map}addState(e,t){t.object.setActive(!1),t.object.setVisible(!1),this.stateMap.set(e,t)}setState(e){if(!this._currentState||this._currentState!==this.stateMap.get(e)){if(this._currentState&&this._currentState.onExit(),this._currentState=this.stateMap.get(e),!this._currentState)throw new Error(`State ${e} does not exist`);this._currentState.onEnter()}}};class L{constructor(){this._playerPosition=new Phaser.Math.Vector2}init(e,t,s){this.currentScene=e,this._stateMachine=new I,this._playerPosition.set(t,s),this._stateMachine.addState("cube",new x(new f(e,0,800,"cube"))),this._stateMachine.addState("ship",new C(new P(e,0,800))),this._stateMachine.setState("cube")}static get instance(){return L._instance||(L._instance=new L),L._instance}get playerPosition(){return this._playerPosition}set playerPosition(e){this._playerPosition=e}update(){this._stateMachine.currentState.update()}get stateMachine(){return this._stateMachine}}const A=L;class k extends Phaser.Scene{constructor(){super({key:"LevelProgress"}),this._levelProgress=0}create(){this._progressFill=this.add.nineslice(this.game.renderer.width/4+5,25,"progressFill",0,845).setOrigin(0,.5),this._progressBar=this.add.nineslice(this.game.renderer.width/4,25,"progressBar",0,850).setOrigin(0,.5),this._progressText=this.add.text(0,0,"Coins: 0",{fontSize:"50px",color:"#FFD700"}).setOrigin(0,0)}update(e,t){var s;super.update(e,t);let i=A.instance.currentScene;this._levelProgress=(null===(s=i.cube.body)||void 0===s?void 0:s.position.x)/i.map.widthInPixels,this._progressFill.displayWidth=845*this._levelProgress,this._levelProgress>w.getInstance().getLevelProgress(i.scene.key)?(w.getInstance().setLevelProgress(i.scene.key,this._levelProgress),k.newBest=!0):this._levelProgress<w.getInstance().getLevelProgress(i.scene.key)&&(k.newBest=!1),this._progressText.setText("Coins: "+w.getInstance().getLevelProgress(i.scene.key+"coins"))}}k.newBest=!1;const O=k;var V;!function(e){e[e.PLAYING=0]="PLAYING",e[e.PAUSED=1]="PAUSED",e[e.COMPLETED=2]="COMPLETED",e[e.FAILED=3]="FAILED"}(V||(V={}));class j extends Phaser.Scene{constructor(e){super(e)}create(){this._explode=this.sound.add("explode",{loop:!1}),this.inputHandler=new b(this),this._spawnPoint=new Phaser.Math.Vector2(0,1e3)}tweenBG(){}createLevelMap(){}initialize(){if(this._levelState=V.PLAYING,this.cameras.main.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.physics.world.setBounds(0,0,this.map.widthInPixels,this.map.heightInPixels),this.physics.world.setFPS(144),A.instance.init(this,this._spawnPoint.x,this._spawnPoint.y),this._cube=A.instance.stateMachine.currentState.object,this.cameras.main.startFollow(this._cube,!0),this._cube.body instanceof Phaser.Physics.Arcade.Body&&this._cube.body.setCollideWorldBounds(!0),this.add.particles(0,0,"particle",{speed:100,scale:{start:.3,end:0},blendMode:"ADD"}).startFollow(this._cube,0,32,!0),null==this.input.keyboard)throw new Error("this.input.keyboard is null");this._levelBGM.isPlaying||this._levelBGM.play(),this.scene.launch("LevelProgress"),this.scene.launch("UI")}loadObjectsFromTilemap(){this._collectibleCount=0,this.map.getObjectLayer("object Layer").objects.forEach((e=>{var t;if("spawn"==e.type&&(this._spawnPoint.x=e.x,this._spawnPoint.y=e.y),"spike"==e.type&&this._spikes.add(new v(this,e.x,e.y,e.width,e.height)).setName(e.name),"portal"==e.type){let s=null===(t=e.properties.find((e=>"nextState"===e.name)))||void 0===t?void 0:t.value;this._portal.add(new m(this,e.x,e.y,e.width,e.height,s)).setName(e.name)}"coin"==e.type&&this._collectibles.add(new n(this,e.x,e.y)).setName(e.name),"jumpPad"==e.type&&this._trigger.add(new l(this,e.x,e.y,e.width,e.height,-1300)).setName(e.name),"gravPad"==e.type&&this._trigger.add(new h(this,e.x,e.y,e.width,e.height)).setName(e.name),"jumpOrb"==e.type&&this._trigger.add(new c(this,e.x,e.y,e.width,e.height,-1100)).setName(e.name),"endpoint"==e.type&&(console.log(e.x,e.y,e.width,e.height),this._trigger.add(new u(this,e.x,e.y,e.width,e.height)).setName(e.name))}))}handleMapCollision(e,t){if(e===this._cube){let s=e.body;if(s.blocked.right&&!A.instance.stateMachine.currentState.playerRule.collideRight)if(t.properties.isPlatform&&s.position.y<t.pixelY-32)console.log(s.position.y,t.pixelY),s.setVelocityY(-200);else if(t.properties.isPlatform&&s.position.y>=t.pixelY);else{if(this._levelState===V.COMPLETED||this._levelState===V.FAILED)return;this._levelState=V.FAILED,this.physics.world.remove(e.body),this.playerDeath(),e.setVisible(!1),e.setActive(!1),this.inputHandler.detach(e),this.cameras.main.stopFollow(),this._levelBGM.stopAndRemoveBufferSource(),this.time.delayedCall(1e3,(()=>{this.scene.restart()}))}else if(s.blocked.left&&!A.instance.stateMachine.currentState.playerRule.collideLeft)if(t.properties.isPlatform&&s.position.y<t.pixelY-32)console.log("Cube hit left"),s.setVelocityY(-200);else if(t.properties.isPlatform&&s.position.y>=t.pixelY);else{if(this._levelState===V.COMPLETED||this._levelState===V.FAILED)return;this._levelState=V.FAILED,this.physics.world.remove(e.body),this.playerDeath(),e.setVisible(!1),e.setActive(!1),this.inputHandler.detach(e),this.cameras.main.stopFollow(),this._levelBGM.stopAndRemoveBufferSource(),this.time.delayedCall(1e3,(()=>{this.scene.restart()}))}else if(s.blocked.up&&!A.instance.stateMachine.currentState.playerRule.collideTop)if(t.properties.isPlatform&&s.position.y>=t.pixelX);else{if(this._levelState===V.COMPLETED||this._levelState===V.FAILED)return;this._levelState=V.FAILED,this.physics.world.remove(e.body),this.playerDeath(),e.setVisible(!1),e.setActive(!1),this.inputHandler.detach(e),this.cameras.main.stopFollow(),this._levelBGM.stopAndRemoveBufferSource(),this.time.delayedCall(1e3,(()=>{this.scene.restart()}))}}}handleCubeSpikeCollision(e,t){if(e===this._cube){if(this._levelState===V.COMPLETED||this._levelState===V.FAILED)return;this._levelState=V.FAILED,this.physics.world.remove(e.body),console.log("Cube hit spike"),this.playerDeath(),e.setVisible(!1),e.setActive(!1),this.inputHandler.detach(e),this.cameras.main.stopFollow(),this._levelBGM.stopAndRemoveBufferSource(),this.time.delayedCall(1e3,(()=>{this.scene.restart()}))}}overlapPortal(e,t){e===this._cube&&(console.log("Cube hit portal"),this.physics.world.disable(t),A.instance.stateMachine.setState(t.nextState),this._cube=A.instance.stateMachine.currentState.object,this.physics.add.collider(this._cube,this.layer,this.handleMapCollision,void 0,this),this.physics.add.collider(this._cube,this._spikes,this.handleCubeSpikeCollision,void 0,this),this.physics.add.overlap(this._cube,this._portal,this.overlapPortal,void 0,this),this.physics.add.overlap(this._cube,this._collectibles,this.overlapCollectible,void 0,this),this.physics.add.overlap(this._cube,this._trigger,this.handleTriggerCollision,void 0,this),this._cube.body instanceof Phaser.Physics.Arcade.Body&&(this._cube.body.setCollideWorldBounds(!0),this._cube.body.setGravity(0)),this.cameras.main.startFollow(this._cube,!0),this.add.particles(0,0,"particle",{speed:100,scale:{start:.3,end:0},blendMode:"ADD"}).startFollow(this._cube,0,32,!0))}overlapCollectible(e,t){e===this._cube&&(this.physics.world.disable(t),this._collectibleCount++,t.setVisible(!1),w.getInstance().setLevelProgress(this.scene.key+"coins",this._collectibleCount))}handleTriggerCollision(e,t){var s;if(e===this._cube){let i=e.body;t instanceof l&&!(t instanceof h)?(i.setVelocityY(t.jumpForce),this.physics.world.disable(t)):t instanceof h?i.setGravityY(-7e3):t instanceof c?((null===(s=this.input.keyboard)||void 0===s?void 0:s.keys[Phaser.Input.Keyboard.KeyCodes.SPACE].isDown)||this.input.activePointer.isDown)&&i.setVelocityY(t.jumpForce):t instanceof u&&(this._levelState=V.COMPLETED,this.physics.world.disable(t),this.scene.stop("UI"),this._levelBGM.stopAndRemoveBufferSource(),this.sound.play("levelComplete",{loop:!1}),this.tweens.add({targets:e,x:this.map.widthInPixels,y:this.game.renderer.height/2,scale:0,duration:4e3,ease:"Back.inOut",onComplete:()=>{this.scene.stop(),this.scene.stop("LevelProgress"),this.scene.launch("LevelComplete")}}))}}get cube(){return this._cube}update(e,t){super.update(e,t),this._levelState===V.PLAYING&&A.instance.update()}pause(){this._levelState=V.PAUSED,this.scene.pause(),this._levelBGM.pause()}resume(){this._levelState=V.PLAYING,this.scene.resume(),this._levelBGM.resume()}stop(){this.scene.stop(),this.scene.stop("UI"),this.scene.stop("LevelProgress"),this._levelBGM.stopAndRemoveBufferSource()}playerDeath(){this._explode.play();let e=this.add.particles(this._cube.x,this._cube.y,"particle",{color:[16436258,16291840,16266752,10421252],colorEase:"quad.out",lifespan:1e3,scale:{start:.7,end:0,ease:"sine.out"},speed:200,advance:1e3,frequency:20,blendMode:"ADD",duration:200});if(e.setDepth(1),e.once("complete",(()=>{e.destroy()})),1==O.newBest){console.log("New Best");let e=this.add.image(A.instance.playerPosition.x,0,"newBest").setOrigin(.5,.5);this.tweens.add({targets:e,y:this.game.renderer.height/2,duration:500,ease:"Bounce"});let t=this.add.text(A.instance.playerPosition.x,0,Math.round(100*w.getInstance().getLevelProgress(this.scene.key)).toString()+"%",{fontSize:"100px",color:"#FFD700",fontStyle:"bold"}).setOrigin(.5,.5);this.tweens.add({targets:t,y:this.game.renderer.height/2+200,duration:500,ease:"Bounce"}),this.time.delayedCall(1e3,(()=>{e.destroy(),t.destroy()}))}this.scene.pause("UI")}}const M=j;class D extends Phaser.Scene{constructor(){super("Menu")}preload(){}create(){this.sound.locked?this.sound.once("unlocked",(()=>{this._menuLoop=this.sound.add("menuLoop",{loop:!0}),this._menuLoop.play()})):(this._menuLoop=this.sound.add("menuLoop",{loop:!0}),this._menuLoop.play()),this.add.image(0,0,"bg").setOrigin(0,0).setDisplaySize(this.game.renderer.width,this.game.renderer.height).setTint(255).setAlpha(.75);let e=this.add.text(this.game.renderer.width/2-300,this.game.renderer.height/2+200,"Stereo Madness\nBEST: "+Math.round(100*w.getInstance().getLevelProgress("Level1")).toString()+"%",{fontSize:"30px",color:"#FF0000",fontStyle:"bold"}).setOrigin(.5,.5).setVisible(!1),t=this.add.text(this.game.renderer.width/2,this.game.renderer.height/2+200,"Back On Track\nBEST: "+Math.round(100*w.getInstance().getLevelProgress("Level2")).toString()+"%",{fontSize:"30px",color:"#FF0000",fontStyle:"bold"}).setOrigin(.5,.5).setVisible(!1),s=this.add.text(this.game.renderer.width/2+300,this.game.renderer.height/2+200,"Polargeist\nBEST: "+Math.round(100*w.getInstance().getLevelProgress("Level3")).toString()+"%",{fontSize:"30px",color:"#FF0000",fontStyle:"bold"}).setOrigin(.5,.5).setVisible(!1);this._playBtn=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2,"playBtn").setVisible(!1).disableInteractive();let i=!1;this._playBtn.on("pointerover",(()=>{this._playBtn.setAlpha(.85)})),this._playBtn.on("pointerout",(()=>{this._playBtn.setAlpha(1)})),this._playBtn.on("pointerdown",(()=>{i=!0,this._playBtn.setTint(16773120)})),this._playBtn.on("pointerup",(()=>{i&&(i=!1,this._lv1Btn.setVisible(!0).setInteractive(),this._lv2Btn.setVisible(!0).setInteractive(),this._lv3Btn.setVisible(!0).setInteractive(),this._playBtn.setVisible(!1).disableInteractive(),e.setVisible(!0),t.setVisible(!0),s.setVisible(!0))})),this.time.delayedCall(500,(()=>{this._playBtn.setVisible(!0).setInteractive()}));const a=this.cameras.main.postFX.addWipe(.3,1,1);this._lv1Btn=this.add.image(this.game.renderer.width/2-300,this.game.renderer.height/2+100,"lv1Btn").setVisible(!1).disableInteractive(),this._lv1Btn.on("pointerover",(()=>{this._lv1Btn.setAlpha(.85)})),this._lv1Btn.on("pointerout",(()=>{this._lv1Btn.setAlpha(1)})),this._lv1Btn.on("pointerdown",(()=>{this._menuLoop.stopAndRemoveBufferSource(),this.sound.play("playSound"),this.scene.transition({target:"Level1",duration:500,moveBelow:!0,onUpdate:e=>{a.progress=e}})})),this._lv1Btn.on("pointerup",(()=>{this._lv1Btn.clearTint()})),this._lv2Btn=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2+100,"lv2Btn").setVisible(!1).disableInteractive(),this._lv2Btn.on("pointerover",(()=>{this._lv2Btn.setAlpha(.85)})),this._lv2Btn.on("pointerout",(()=>{this._lv2Btn.setAlpha(1)})),this._lv2Btn.on("pointerdown",(()=>{this._menuLoop.stopAndRemoveBufferSource(),this.sound.play("playSound"),this.scene.transition({target:"Level2",duration:500,moveBelow:!0,onUpdate:e=>{a.progress=e}})})),this._lv2Btn.on("pointerup",(()=>{this._lv2Btn.clearTint()})),this._lv3Btn=this.add.image(this.game.renderer.width/2+300,this.game.renderer.height/2+100,"lv3Btn").setVisible(!1).disableInteractive(),this._lv3Btn.on("pointerover",(()=>{this._lv3Btn.setAlpha(.85)})),this._lv3Btn.on("pointerout",(()=>{this._lv3Btn.setAlpha(1)})),this._lv3Btn.on("pointerdown",(()=>{this._menuLoop.stopAndRemoveBufferSource(),this.sound.play("playSound"),this.scene.transition({target:"Level3",duration:500,moveBelow:!0,onUpdate:e=>{a.progress=e}})})),this._lv3Btn.on("pointerup",(()=>{this._lv3Btn.clearTint()}))}}const T=D;class E extends Phaser.Scene{constructor(){super("Boot")}preload(){this.cameras.main.setBackgroundColor(0),this.load.image("logo","assets/images/logo.png"),this.load.image("bg","assets/images/bg.png"),this.load.image("progressBar","assets/images/process-bar-front.png"),this.load.image("progressFill","assets/images/process-bar-back.png"),this.load.once("complete",(()=>{this.scale.setParentSize(window.innerWidth,window.innerHeight)}))}update(e,t){super.update(e,t),this.scene.start("Load")}}const G=E;class F extends Phaser.Scene{constructor(){super("Load")}preload(){this.cameras.main.setBackgroundColor(0),this.createLoadingGraphics(),this.load.on("progress",this.updateBar,this),this.load.image("playBtn","assets/images/playBtn.png"),this.load.image("cube","assets/images/player.png"),this.load.image("ship","assets/images/ship.png"),this.load.image("particle","assets/images/particle_001.png"),this.load.tilemapTiledJSON("lv1","assets/tilemaps/stereo-madness.json"),this.load.tilemapTiledJSON("lv2","assets/tilemaps/back-on-track.json"),this.load.tilemapTiledJSON("lv3","assets/tilemaps/polargeist.json"),this.load.image("tiles","assets/tilemaps/kenney_redux_64x64.png"),this.load.audio("menuLoop","assets/sounds/menuLoop.mp3"),this.load.audio("playSound",["assets/sounds/playSound.ogg","assets/sounds/playSound.mp3"]),this.load.audio("StereoMadness","assets/sounds/StereoMadness.mp3"),this.load.audio("BackOnTrack","assets/sounds/BackOnTrack.mp3"),this.load.audio("Polargeist","assets/sounds/Polargeist.mp3"),this.load.audio("explode",["assets/sounds/explode.ogg","assets/sounds/explode.mp3"]),this.load.audio("levelComplete",["assets/sounds/LevelComplete.ogg","assets/sounds/LevelComplete.mp3"]),this.load.image("coin1","assets/images/coin-sheet/secretCoin_01.png"),this.load.image("coin2","assets/images/coin-sheet/secretCoin_02.png"),this.load.image("coin3","assets/images/coin-sheet/secretCoin_03.png"),this.load.image("bump","assets/images/jump-pad/bump.png"),this.load.image("gravBump","assets/images/jump-pad/gravbump.png"),this.load.image("ring","assets/images/jump-orb/ring.png"),this.load.image("coin4","assets/images/coin-sheet/secretCoin_04.png"),this.load.image("lv1Btn","assets/images/levels/lv1.png"),this.load.image("lv2Btn","assets/images/levels/lv2.png"),this.load.image("lv3Btn","assets/images/levels/lv3.png"),this.load.image("pauseBtn","assets/images/pauseBtn.png"),this.load.image("resumeBtn","assets/images/resumeBtn.png"),this.load.image("menuBtn","assets/images/menuBtn.png"),this.load.image("restartBtn","assets/images/restartBtn.png"),this.load.image("levelComplete","assets/images/levelComplete.png"),this.load.image("newBest","assets/images/newBest.png")}update(e,t){super.update(e,t),this.game.device.os.iOS&&this.doubleLoadAudio();const s=this.cameras.main.postFX.addWipe();this.scene.transition({target:"Menu",duration:1e3,moveBelow:!0,onUpdate:e=>{s.progress=e}})}doubleLoadAudio(){this.load.audio("StereoMadness","assets/sounds/StereoMadness.mp3"),this.load.audio("BackOnTrack","assets/sounds/BackOnTrack.mp3"),this.load.audio("explode","assets/sounds/explode.mp3")}createLoadingGraphics(){this.add.image(0,0,"bg").setOrigin(0,0).setDisplaySize(this.game.renderer.width,this.game.renderer.height).setTint(16775543).setAlpha(.75),this.add.image(0,0,"logo").setOrigin(0,0).setPosition(this.game.renderer.width/4,this.game.renderer.height/4),this.loadingBarFill=this.add.nineslice(this.game.renderer.width/4+5,400,"progressFill",0,845).setOrigin(0,.5),this.loadingBar=this.add.nineslice(this.game.renderer.width/4,400,"progressBar",0,850).setOrigin(0,.5)}updateBar(e){this.loadingBarFill.displayWidth=845*e}}const U=F;class N extends Phaser.Scene{constructor(){super("UI")}create(){this._pauseBG=this.add.graphics({fillStyle:{color:16777215,alpha:.35}}).fillRoundedRect(0,0,this.game.renderer.width,this.game.renderer.height,20).setVisible(!1),this._pauseBtn=this.add.image(this.game.renderer.width,0,"pauseBtn").setOrigin(1,0).setInteractive(),this._pauseBtn.on("pointerover",(()=>{this._pauseBtn.setAlpha(.85)})),this._pauseBtn.on("pointerout",(()=>{this._pauseBtn.setAlpha(1)})),this._pauseBtn.on("pointerdown",(()=>{A.instance.currentScene.pause(),this._pauseBtn.setVisible(!1),this._pauseBtn.disableInteractive(),this._pauseBG.setVisible(!0),this._resumeBtn.setVisible(!0).setInteractive(),this._menuBtn.setVisible(!0).setInteractive(),this._restartBtn.setVisible(!0).setInteractive()})),this.input.keyboard.on("keydown-ESC",(()=>{let e=A.instance.currentScene;this._pauseBtn.visible?(e.pause(),this._pauseBtn.setVisible(!1),this._pauseBtn.disableInteractive(),this._pauseBG.setVisible(!0),this._resumeBtn.setVisible(!0).setInteractive(),this._menuBtn.setVisible(!0).setInteractive(),this._restartBtn.setVisible(!0).setInteractive()):(e.resume(),this._pauseBtn.setVisible(!0),this._pauseBtn.setInteractive(),this._pauseBG.setVisible(!1),this._resumeBtn.setVisible(!1).disableInteractive(),this._menuBtn.setVisible(!1).disableInteractive(),this._restartBtn.setVisible(!1).disableInteractive())})),this._resumeBtn=this.add.image(this.game.renderer.width/2,this.game.renderer.height/2,"resumeBtn").setOrigin(.5,.5).setVisible(!1).disableInteractive(),this._resumeBtn.on("pointerover",(()=>{this._resumeBtn.setAlpha(.85)})),this._resumeBtn.on("pointerout",(()=>{this._resumeBtn.setAlpha(1)})),this._resumeBtn.on("pointerdown",(()=>{A.instance.currentScene.resume(),this._pauseBG.setVisible(!1),this._resumeBtn.setVisible(!1).disableInteractive(),this._menuBtn.setVisible(!1).disableInteractive(),this._pauseBtn.setVisible(!0).setInteractive(),this._restartBtn.setVisible(!1).disableInteractive()})),this._menuBtn=this.add.image(this.game.renderer.width/2+200,this.game.renderer.height/2,"menuBtn").setOrigin(.5,.5).setVisible(!1).disableInteractive(),this._menuBtn.on("pointerover",(()=>{this._menuBtn.setAlpha(.85)})),this._menuBtn.on("pointerout",(()=>{this._menuBtn.setAlpha(1)})),this._menuBtn.on("pointerdown",(()=>{this.scene.stop("LevelProgress");let e=A.instance.currentScene;const t=this.cameras.main.postFX.addWipe();this.scene.transition({target:"Menu",duration:1e3,moveBelow:!0,onUpdate:e=>{t.progress=e}}),this.time.delayedCall(1e3,(()=>{e.scene.stop()}),[],this)})),this._restartBtn=this.add.image(this.game.renderer.width/2-200,this.game.renderer.height/2,"restartBtn").setOrigin(.5,.5).setVisible(!1).disableInteractive(),this._restartBtn.on("pointerover",(()=>{this._restartBtn.setAlpha(.85)})),this._restartBtn.on("pointerout",(()=>{this._restartBtn.setAlpha(1)})),this._restartBtn.on("pointerdown",(()=>{A.instance.currentScene.scene.restart(),this._pauseBtn.setVisible(!0).setInteractive(),this._pauseBG.setVisible(!1),this._resumeBtn.setVisible(!1).disableInteractive(),this._menuBtn.setVisible(!1).disableInteractive(),this._restartBtn.setVisible(!1).disableInteractive()}))}}const R=N;class z extends Phaser.Scene{constructor(){super({key:"LevelComplete"})}preload(){this.load.image("levelComplete","assets/images/levelComplete.png")}create(){this.add.graphics({fillStyle:{color:0,alpha:.75}}).fillRect(0,0,this.game.renderer.width,this.game.renderer.height),this.add.image(this.game.renderer.width/2,this.game.renderer.height/2,"levelComplete").setOrigin(.5,.5),this.add.text(this.game.renderer.width/2,this.game.renderer.height/2+100,"Coins: "+w.getInstance().getLevelProgress(A.instance.currentScene.scene.key+"coins").toString()+"/3",{fontSize:"80px",color:"#FFD700",fontStyle:"bold"}).setOrigin(.5,.5);let e=this.add.image(this.game.renderer.width/2-200,this.game.renderer.height/2+200,"menuBtn").setOrigin(.5,.5).setInteractive();e.on("pointerover",(()=>{e.setAlpha(.85)})),e.on("pointerout",(()=>{e.setAlpha(1)})),e.on("pointerdown",(()=>{this.scene.start("Menu")}));let t=this.add.image(this.game.renderer.width/2+200,this.game.renderer.height/2+200,"restartBtn").setOrigin(.5,.5).setInteractive();t.on("pointerover",(()=>{t.setAlpha(.85)})),t.on("pointerout",(()=>{t.setAlpha(1)})),t.on("pointerdown",(()=>{A.instance.currentScene.scene.restart(),this.scene.start("UI")}))}}const Y=z,H={type:a().AUTO,width:1536,height:776,scene:[G,U,T,class extends M{constructor(){super("Level1")}preload(){}create(){super.create(),this._levelBGM=this.sound.add("StereoMadness",{loop:!1}),this.createLevelMap(),this.loadObjectsFromTilemap(),this.initialize(),this.physics.add.collider(this._cube,this.layer,this.handleMapCollision,void 0,this),this.physics.add.collider(this._spikes,this.layer),this.physics.add.collider(this._cube,this._spikes,this.handleCubeSpikeCollision,void 0,this),this.physics.add.overlap(this._cube,this._portal,this.overlapPortal,void 0,this),this.physics.add.overlap(this._cube,this._collectibles,this.overlapCollectible,void 0,this),this.physics.add.overlap(this._cube,this._trigger,this.handleTriggerCollision,void 0,this)}createLevelMap(){var e,t;if(this.map=this.make.tilemap({key:"lv1"}),this.tiles=this.map.addTilesetImage("levelTiles","tiles"),null==this.map)throw new Error("this.map is null");if(null==this.tiles)throw new Error("this.tiles is null");this.bg=this.map.createLayer("backgroundLayer",this.map.addTilesetImage("bg","bg")),null===(e=this.bg)||void 0===e||e.setName("backgroundLayer"),this.tweenBG(),this.layer=this.map.createLayer("foregroundLayer",this.tiles),null===(t=this.layer)||void 0===t||t.setName("foregroundLayer"),this.layer.setCollisionByProperty({collide:!0}),this._spikes=this.add.group({runChildUpdate:!0}),this._portal=this.add.group({runChildUpdate:!0}),this._collectibles=this.add.group({runChildUpdate:!0}),this._trigger=this.add.group({runChildUpdate:!0})}tweenBG(){const e=Phaser.Display.Color.ValueToColor(255),t=Phaser.Display.Color.ValueToColor(15868159);this.tweens.addCounter({from:0,to:100,duration:9e4,repeat:-1,yoyo:!0,onUpdate:s=>{var i;const a=s.getValue(),o=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,a),n=Phaser.Display.Color.GetColor(o.r,o.g,o.b);null===(i=this.bg)||void 0===i||i.setTint(n)}})}},class extends M{constructor(){super("Level2")}preload(){}create(){super.create(),this._levelBGM=this.sound.add("BackOnTrack",{loop:!1}),this.createLevelMap(),this.loadObjectsFromTilemap(),this.initialize(),this.physics.add.collider(this._cube,this.layer,this.handleMapCollision,void 0,this),this.physics.add.collider(this._spikes,this.layer),this.physics.add.collider(this._cube,this._spikes,this.handleCubeSpikeCollision,void 0,this),this.physics.add.overlap(this._cube,this._portal,this.overlapPortal,void 0,this),this.physics.add.overlap(this._cube,this._collectibles,this.overlapCollectible,void 0,this),this.physics.add.overlap(this._cube,this._trigger,this.handleTriggerCollision,void 0,this)}createLevelMap(){var e,t;if(this.map=this.make.tilemap({key:"lv2"}),this.tiles=this.map.addTilesetImage("levelTiles","tiles"),null==this.map)throw new Error("this.map is null");if(null==this.tiles)throw new Error("this.tiles is null");this.bg=this.map.createLayer("backgroundLayer",this.map.addTilesetImage("bg","bg")),null===(e=this.bg)||void 0===e||e.setName("backgroundLayer"),this.tweenBG(),this.layer=this.map.createLayer("foregroundLayer",this.tiles),null===(t=this.layer)||void 0===t||t.setName("foregroundLayer"),this.layer.setCollisionByProperty({collide:!0}),this._spikes=this.add.group({runChildUpdate:!0}),this._portal=this.add.group({runChildUpdate:!0}),this._collectibles=this.add.group({runChildUpdate:!0}),this._trigger=this.add.group({runChildUpdate:!0})}tweenBG(){const e=Phaser.Display.Color.ValueToColor(15868159),t=Phaser.Display.Color.ValueToColor(255);this.tweens.addCounter({from:0,to:100,duration:9e4,repeat:-1,yoyo:!0,onUpdate:s=>{var i;const a=s.getValue(),o=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,a),n=Phaser.Display.Color.GetColor(o.r,o.g,o.b);null===(i=this.bg)||void 0===i||i.setTint(n)}})}},class extends M{constructor(){super("Level3")}preload(){}create(){super.create(),this._levelBGM=this.sound.add("Polargeist",{loop:!1}),this.createLevelMap(),this.loadObjectsFromTilemap(),this.initialize(),this.physics.add.collider(this._cube,this.layer,this.handleMapCollision,void 0,this),this.physics.add.collider(this._spikes,this.layer),this.physics.add.collider(this._cube,this._spikes,this.handleCubeSpikeCollision,void 0,this),this.physics.add.overlap(this._cube,this._portal,this.overlapPortal,void 0,this),this.physics.add.overlap(this._cube,this._collectibles,this.overlapCollectible,void 0,this),this.physics.add.overlap(this._cube,this._trigger,this.handleTriggerCollision,void 0,this)}createLevelMap(){var e,t;if(this.map=this.make.tilemap({key:"lv3"}),this.tiles=this.map.addTilesetImage("levelTiles","tiles"),null==this.map)throw new Error("this.map is null");if(null==this.tiles)throw new Error("this.tiles is null");this.bg=this.map.createLayer("backgroundLayer",this.map.addTilesetImage("bg","bg")),null===(e=this.bg)||void 0===e||e.setName("backgroundLayer"),this.tweenBG(),this.layer=this.map.createLayer("foregroundLayer",this.tiles),null===(t=this.layer)||void 0===t||t.setName("foregroundLayer"),this.layer.setCollisionByProperty({collide:!0}),this._spikes=this.add.group({runChildUpdate:!0}),this._portal=this.add.group({runChildUpdate:!0}),this._collectibles=this.add.group({runChildUpdate:!0}),this._trigger=this.add.group({runChildUpdate:!0})}tweenBG(){const e=Phaser.Display.Color.ValueToColor(25600),t=Phaser.Display.Color.ValueToColor(4251856);this.tweens.addCounter({from:0,to:100,duration:9e4,repeat:-1,yoyo:!0,onUpdate:s=>{var i;const a=s.getValue(),o=Phaser.Display.Color.Interpolate.ColorWithColor(e,t,100,a),n=Phaser.Display.Color.GetColor(o.r,o.g,o.b);null===(i=this.bg)||void 0===i||i.setTint(n)}})}},O,R,Y],physics:{default:"arcade",arcade:{gravity:{x:0,y:3050}}},scale:{mode:a().Scale.FIT,autoCenter:a().Scale.CENTER_HORIZONTALLY}};new(a().Game)(H),console.log(window.innerWidth)}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var o=s[e]={exports:{}};return t[e].call(o.exports,o,o.exports,i),o.exports}i.m=t,e=[],i.O=(t,s,a,o)=>{if(!s){var n=1/0;for(d=0;d<e.length;d++){for(var[s,a,o]=e[d],r=!0,l=0;l<s.length;l++)(!1&o||n>=o)&&Object.keys(i.O).every((e=>i.O[e](s[l])))?s.splice(l--,1):(r=!1,o<n&&(n=o));if(r){e.splice(d--,1);var h=a();void 0!==h&&(t=h)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[s,a,o]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={792:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,o,[n,r,l]=s,h=0;if(n.some((t=>0!==e[t]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var d=l(i)}for(t&&t(s);h<n.length;h++)o=n[h],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(d)},s=self.webpackChunktype_project_template=self.webpackChunktype_project_template||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[96],(()=>i(854)));a=i.O(a)})();